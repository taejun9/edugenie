import{e as w,J as y,y as h,I as x,f as d,c as r,a as o,q as v,t as _,A as b,o as n}from"./index-D6JMEy7c.js";const k={class:"flex min-h-screen items-center justify-center bg-gray-50 px-4 py-12"},C={class:"w-full max-w-md text-center"},I={key:0,class:"space-y-4"},R={key:1,class:"space-y-4"},A={class:"text-gray-600"},E={__name:"AuthCallback",setup(U){const u=x(),p=y(),{login:m,fetchFingerprint:g}=h(),a=d(!0),s=d(null);w(()=>{try{const{name:t,email:e,picture:i,provider:l}=p.query;if(!t||!e||!l)throw new Error("필수 사용자 정보가 없습니다.");const c={name:decodeURIComponent(t),email:decodeURIComponent(e),picture:i?decodeURIComponent(i):"",provider:decodeURIComponent(l)};if(window.opener){window.opener.postMessage({type:"oauth-success",user:c},window.location.origin),window.close();return}m(c),setTimeout(()=>{u.push({path:"/",query:{}})},1e3)}catch(t){console.error("OAuth 콜백 처리 오류:",t),s.value=t.message||"로그인 처리 중 오류가 발생했습니다.",a.value=!1}});const f=async()=>{const t=await g(),e=new URL(b.AUTH.GOOGLE);t&&e.searchParams.set("fingerprint",t),window.location.href=e.toString()};return(t,e)=>(n(),r("div",k,[o("div",C,[a.value?(n(),r("div",I,[...e[0]||(e[0]=[o("div",{class:"mx-auto h-12 w-12 animate-spin rounded-full border-4 border-gray-300 border-t-indigo-600"},null,-1),o("p",{class:"text-gray-600"},"로그인 처리 중...",-1)])])):s.value?(n(),r("div",R,[e[1]||(e[1]=o("div",{class:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-red-100"},[o("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),e[2]||(e[2]=o("h2",{class:"text-xl font-bold text-gray-900"},"로그인 실패",-1)),o("p",A,_(s.value),1),o("button",{onClick:f,class:"mt-4 rounded-lg bg-indigo-600 px-4 py-2 text-white transition-colors hover:bg-indigo-700"}," 다시 시도 ")])):v("",!0)])]))}};export{E as default};
