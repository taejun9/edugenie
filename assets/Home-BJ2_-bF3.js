import{c,o as l,a as t,t as p,F as j,r as R,n as $,b as G,d as Re,h as z,e as te,f as y,g as Ee,i as O,j as w,k as B,l as he,m as k,w as ce,p as W,q as M,T as ve,s as F,u as Q,v as re,x as Ie,y as X,A as be,z as xe,B as Ge,C as f,D as le,E as Oe,G as De,H as Ne,I as je}from"./index-wfQHEJiI.js";const He={class:"mb-8 flex items-start space-x-3 rounded-xl border border-red-100 bg-red-50 p-4 text-red-700 animate-in fade-in slide-in-from-top-2",role:"alert","aria-live":"assertive"},Ve={class:"min-w-0 flex-1"},ze={class:"break-words text-sm opacity-90"},Ue={__name:"ErrorAlert",props:{error:{type:String,required:!0}},emits:["close"],setup(e){return(a,o)=>(l(),c("div",He,[o[2]||(o[2]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mt-0.5 h-6 w-6 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),t("div",Ve,[o[1]||(o[1]=t("p",{class:"mb-1 font-bold"},"Material generation failed.",-1)),t("p",ze,p(e.error),1),t("button",{onClick:o[0]||(o[0]=i=>a.$emit("close")),class:"mt-3 rounded px-2 py-1 text-xs font-bold uppercase tracking-wider hover:underline focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2","aria-label":"closed error alert"}," CLOSE ")])]))}},Fe={class:"grid grid-cols-1 gap-8 text-center md:grid-cols-3"},Ke={class:"mb-2 font-bold text-[#333]"},We={class:"text-sm text-[#666]"},Qe={__name:"FeatureCards",setup(e){const a={blue:"bg-blue-100 text-blue-600",purple:"bg-purple-100 text-purple-600",green:"bg-green-100 text-green-600"},o=[{icon:()=>z("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[z("path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1-2.5-2.5Z"}),z("path",{d:"M8 7h6"}),z("path",{d:"M8 11h8"})]),color:"blue",title:"Adaptive Reading Text",description:"Instantly rewrite any content to match the reading level of your students, making difficult topics accessible."},{icon:()=>z("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[z("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),z("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]),color:"purple",title:"Contextual Glossary",description:"Build vocabulary mastery with key terms, clear definitions, and real-world examples derived from the text."},{icon:()=>z("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[z("path",{d:"m9 11 3 3L22 4"}),z("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]),color:"green",title:"Instant Quizzes & Tests",description:"Create diverse assessment typesâ€”from multiple choice to open-ended questionsâ€”in seconds to check understanding."}];return(i,n)=>(l(),c("div",Fe,[(l(),c(j,null,R(o,(s,r)=>t("div",{key:`feature-${r}`,class:"feature-card cursor-default rounded-2xl border border-gray-100 bg-white p-6 shadow-sm slide-in-from-top-4"},[t("div",{class:$(["mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full",a[s.color]])},[(l(),G(Re(s.icon)))],2),t("h3",Ke,p(s.title),1),t("p",We,p(s.description),1)])),64))]))}},Ye="/edugenie/assets/genie_head-CrY527vs.svg",ye=(e,a)=>{const o=e.__vccOpts||e;for(const[i,n]of a)o[i]=n;return o},Xe={class:"relative flex h-full w-full items-center justify-center"},Ze={class:"book-wrapper relative"},Je={class:"flex h-full w-full flex-col items-center justify-center p-4 text-center text-slate-800"},et={class:"flex h-full w-full flex-col items-center justify-center rounded border-2 border-slate-300 bg-white/50 p-4"},tt=650,nt={__name:"MagicBook",setup(e){const a=y(null),o=y(null),i=y(null),n=y(null),s=y(!0),r=y(120),d=y(140),g=y("#0F8763"),u=y("#4C8FA7"),m=w(()=>({width:`${r.value}px`,height:`${d.value}px`})),v=w(()=>({width:`${r.value}px`,height:`${d.value}px`})),b=w(()=>({background:g.value,transform:`translateZ(${36*-.5}px)`})),C=w(()=>({width:"36px",height:`${d.value}px`,background:`linear-gradient(to right, ${u.value}, ${g.value} 40%, ${u.value})`,transform:`translateZ(${36*-.69}px) rotateY(-90deg)`})),E=w(()=>({width:`${r.value-10}px`,height:`${d.value-8}px`,transform:`translateZ(${36*-.5+5}px)`})),N=w(()=>({transform:"translateZ(30px)"})),H=w(()=>({width:"30px"})),K=w(()=>({height:"30px"})),q=w(()=>({height:`${d.value}px`,transition:"transform 1.5s cubic-bezier(0.4, 0, 0.2, 1)",transform:`translateZ(${36*.5}px) rotateY(0deg)`})),L=w(()=>`translateZ(${36*.34}px) rotateY(-180deg)`),A=w(()=>({background:g.value}));te(async()=>{s.value=!0,await P(0),U()}),Ee(()=>{s.value=!1});const P=x=>new Promise(h=>setTimeout(h,x)),Y=async()=>{const x=a.value,h=o.value,S=i.value,T=n.value;if(!x||!h||!S||!T){console.error("MagicBook refs not ready",{book:x,wandContainer:h,spellText:S,particleOrigin:T});return}const I=x.querySelector(".front-cover");I&&(I.style.transform=L.value),await P(1200),h.style.opacity="1",h.classList.add("wand-active"),await P(500);const V=h.querySelector(".wand");V.classList.add("animate-shake"),await P(200),ge(T),S.classList.remove("scale-0"),S.classList.add("scale-110"),setTimeout(()=>S.classList.remove("scale-110"),200),await P(2e3),h.style.opacity="0",h.classList.remove("wand-active"),V.classList.remove("animate-shake"),S.classList.add("scale-0"),await P(500),I&&(I.style.transform=`translateZ(${36*.5}px) rotateY(0deg)`),await P(1500)},U=async()=>{for(;s.value;)await Y(),await P(tt)},ge=x=>{const h=["#fcd34d","#60a5fa","#f472b6","#ffffff"];for(let T=0;T<40;T++){const I=document.createElement("div");I.classList.add("sparkle");const V=Math.random()*8+4;I.style.width=`${V}px`,I.style.height=`${V}px`,I.style.backgroundColor=h[Math.floor(Math.random()*h.length)],I.style.right="-55px",I.style.top="10px",x.parentElement.appendChild(I);const Z=Math.random()*Math.PI*2,ne=60+Math.random()*100,oe=Math.cos(Z)*ne,J=Math.sin(Z)*ne,Be=I.animate([{transform:"translate(0, 0) scale(0)",opacity:1},{transform:`translate(${oe}px, ${J}px) scale(1)`,opacity:1,offset:.6},{transform:`translate(${oe*1.2}px, ${J*1.2}px) scale(0)`,opacity:0}],{duration:600+Math.random()*600,easing:"cubic-bezier(0, .9, .57, 1)"});Be.onfinish=()=>I.remove()}};return(x,h)=>(l(),c("div",{class:"mx-auto flex items-center justify-center font-sans text-slate-200",style:O(m.value)},[t("div",Xe,[t("div",Ze,[t("div",{ref_key:"bookRef",ref:a,class:"book relative",style:O(v.value)},[t("div",{class:"back-cover absolute h-full w-full rounded-r-md",style:O(b.value)},null,4),t("div",{class:"spine absolute -top-px left-0 origin-left rounded-sm",style:O(C.value)},null,4),t("div",{class:"paper-block absolute left-1 top-1",style:O(E.value)},[t("div",{class:"paper-top absolute left-0 top-0 w-full origin-top",style:O(K.value)},null,4),t("div",{class:"paper-bottom absolute bottom-0 left-0 w-full origin-bottom",style:O(K.value)},null,4),t("div",{class:"paper-right absolute right-0 top-0 h-full origin-right",style:O(H.value)},null,4),t("div",{class:"paper-content absolute flex h-full w-full items-center justify-center border border-slate-300 bg-gradient-to-r from-white to-[#f0f0f0]",style:O(N.value)},[t("div",Je,[t("div",et,[h[0]||(h[0]=t("span",{class:"mb-2 font-serif text-xs tracking-widest text-slate-400"}," MAGIC SPELL ",-1)),t("h2",{ref_key:"spellTextRef",ref:i,id:"spell-text",class:"scale-0 bg-gradient-to-r from-indigo-600 to-pink-500 bg-clip-text text-4xl font-black text-transparent transition-transform duration-500 ease-out"}," âœ¨ ",512)])])],4)],4),t("div",{class:"front-cover absolute left-[3px] top-0 w-full origin-left shadow-2xl",style:O(q.value)},[t("div",{class:"front-face absolute flex h-full w-full items-center justify-center rounded-r-md border-l-4 border-indigo-900/20",style:O(A.value)},[...h[1]||(h[1]=[t("div",{class:"flex h-24 w-24 items-center justify-center rounded-full border-2 border-yellow-400/30 bg-[#12a377] bg-opacity-80 shadow-inner"},[t("img",{class:"h-10 w-10",src:Ye,alt:"genie head"})],-1)])],4),h[2]||(h[2]=t("div",{class:"back-face absolute flex h-full w-full items-center justify-center rounded-l-md bg-color-book"},[t("div",{class:"back-paper h-full w-full border border-slate-300 bg-gradient-to-l from-white to-[#f0f0f0] p-4"},[t("p",{class:"text-center font-serif text-sm italic text-slate-500"},[B(' "The magic begins '),t("br"),B(' where belief starts." ')])])],-1))],4)],4)]),t("div",{ref_key:"wandContainerRef",ref:o,class:"pointer-events-none absolute right-[-10px] top-[50px] z-[100] h-20 w-20 opacity-0 transition-opacity duration-500"},[h[3]||(h[3]=he('<div class="wand h-full w-full -rotate-[30deg]" data-v-ff7fa358><div class="wand-stick absolute bottom-0 left-1/2 h-10 w-1 -translate-x-1/2 rounded-sm" data-v-ff7fa358></div><div class="wand-star absolute left-1/2 top-[25%] h-8 w-8 -translate-x-1/2 text-yellow-400" data-v-ff7fa358><svg viewBox="0 0 24 24" fill="currentColor" data-v-ff7fa358><path d="M12 2l2.4 7.2h7.6l-6 4.8 2.4 7.2L12 16.8l-6.4 4.4 2.4-7.2-6-4.8h7.6z" data-v-ff7fa358></path></svg></div></div>',1)),t("div",{ref_key:"particleOriginRef",ref:n,class:"pointer-events-none absolute right-[-55px] top-[10px] h-0 w-0"},null,512)],512)])],4))}},ot=ye(nt,[["__scopeId","data-v-ff7fa358"]]),st={class:"fixed left-0 top-0 z-[9999] flex h-screen w-screen items-center justify-center bg-black/30"},at={class:"flex flex-col items-center justify-center gap-y-6",role:"status","aria-live":"polite","aria-label":"generating materials"},rt={class:"flex flex-col items-center justify-center gap-y-2 rounded-3xl"},lt={class:"text-shadow-[0_35px_35px_rgb(0_0_0_/_0.25)] animate-pulse font-medium text-[#f9f9f9] backdrop-blur-sm"},it={class:"mt-4 h-3 w-64 overflow-hidden rounded-full border-2 border-blue-600 bg-gray-200"},dt={__name:"LoadingSpinner",props:{progressValue:{type:Number,default:null}},setup(e){const a=["Scanning information, adjusting reading levels, and crafting questions...","Gathering relevant information from Wikipedia...","Drafting passages tailored to the grade level...","Extracting key vocabulary and defining terms...","Generating assessment questions...","Building the knowledge map..."],o=e,i=y(a[0]),n=y(0);let s=null,r=null;const d=w(()=>o.progressValue!==null?o.progressValue:n.value);return te(()=>{let g=0;s=setInterval(()=>{g=(g+1)%a.length,i.value=a[g]},3e3),o.progressValue===null&&(r=setInterval(()=>{if(n.value<95){const u=n.value<30?5:n.value<60?3:1.5;n.value=Math.min(n.value+u,95)}},500))}),Ee(()=>{s&&clearInterval(s),r&&clearInterval(r)}),(g,u)=>(l(),c("div",st,[t("div",at,[k(ot,{class:"scale-80"}),t("div",rt,[u[0]||(u[0]=t("p",{class:"text-shadow-[0_35px_35px_rgb(0_0_0_/_0.25)] wave-text text-lg font-bold backdrop-blur-sm"}," Magically generating your materials... ",-1)),t("p",lt,p(i.value),1),t("div",it,[t("div",{class:"h-full rounded-full bg-gradient-to-r from-color-main to-color-sub transition-all duration-500 ease-out",style:O({width:`${d.value}%`}),"aria-hidden":"true"},null,4)])])])]))}},ct={class:"flex-shrink-0"},ut={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},gt={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},pt={key:2,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ft={class:"min-w-0 flex-1"},mt={class:"text-sm font-medium"},ht={__name:"Toast",props:{message:{type:String,required:!0},type:{type:String,default:"info",validator:e=>["success","error","info"].includes(e)},duration:{type:Number,default:3e3}},emits:["close"],setup(e,{emit:a}){const o=e,i=a,n=y(!1);let s=null;te(()=>{n.value=!0,o.duration>0&&(s=setTimeout(()=>{r()},o.duration))}),ce(()=>o.message,()=>{n.value=!0,s&&clearTimeout(s),o.duration>0&&(s=setTimeout(()=>{r()},o.duration))});const r=()=>{n.value=!1,s&&(clearTimeout(s),s=null),setTimeout(()=>{i("close")},200)};return(d,g)=>(l(),G(ve,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:W(()=>[n.value?(l(),c("div",{key:0,class:$(["no-print z-50 flex w-full max-w-md items-start gap-3 rounded-lg border px-8 py-6 shadow-lg",e.type==="success"?"border-green-200 bg-green-50 text-green-800":e.type==="error"?"border-red-200 bg-red-50 text-red-800":e.type==="info"?"border-blue-200 bg-blue-50 text-blue-800":"border-gray-200 bg-gray-50 text-gray-800"]),role:"alert","aria-live":"polite"},[t("div",ct,[e.type==="success"?(l(),c("svg",ut,[...g[0]||(g[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):e.type==="error"?(l(),c("svg",gt,[...g[1]||(g[1]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):(l(),c("svg",pt,[...g[2]||(g[2]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])]))]),t("div",ft,[t("p",mt,p(e.message),1)]),t("button",{onClick:r,class:"flex-shrink-0 text-current opacity-60 transition-opacity hover:opacity-100","aria-label":"ë‹«ê¸°"},[...g[3]||(g[3]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])],2)):M("",!0)]),_:1}))}},vt={},bt={class:"mb-10 mt-4 text-center"};function xt(e,a){return l(),c("div",bt,[...a[0]||(a[0]=[t("p",{class:"mb-4 text-2xl font-extrabold tracking-tight text-gray-900 sm:text-5xl"},[B(" Custom Educational Content "),t("span",{class:"bg-gradient-to-r from-color-main to-color-sub bg-clip-text text-transparent"}," Tailored for All ")],-1),t("p",{class:"text-xl text-gray-600"}," Turn any subject into reading texts, glossaries, and quizzes perfectly matched to any grade level in seconds. ",-1)])])}const yt=ye(vt,[["render",xt]]),wt={class:"relative overflow-hidden p-4 pr-4 text-white"},kt={class:"relative flex items-start justify-between"},$t={class:"min-w-0 flex-1 p-4"},Ct={id:"modal-title",class:"mb-2 text-2xl font-bold leading-tight"},At={key:0,class:"p-8"},St={class:"whitespace-pre-line text-base font-medium leading-relaxed text-white/90"},Mt={key:1,class:"p-8"},_t=["onClick"],Lt={__name:"Modal",props:{visible:{type:Boolean,default:!1},title:{type:String,default:"ì•Œë¦¼"},message:{type:String,default:""},type:{type:String,default:"info",validator:e=>["success","error","info","warning"].includes(e)},buttons:{type:Array,default:()=>[{label:"í™•ì¸",action:"confirm",variant:"primary"}],validator:e=>e.every(a=>typeof a=="object"&&typeof a.label=="string"&&typeof a.action=="string")},closable:{type:Boolean,default:!0},closeOnBackdrop:{type:Boolean,default:!0}},emits:["close","action"],setup(e,{emit:a}){const o=e,i=a,n=w(()=>{const u={success:"bg-gradient-to-r from-green-600 to-emerald-600",error:"bg-gradient-to-r from-red-700 to-rose-700",info:"bg-gradient-to-r from-indigo-600 to-cyan-600",warning:"bg-gradient-to-r from-yellow-500 to-orange-500"};return u[o.type]||u.info}),s=u=>{const m=u.variant||"primary",v="focus:ring-offset-2";if(m==="primary"){const b={success:"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700 focus:ring-green-500 shadow-lg shadow-green-500/30",error:"bg-gradient-to-r from-red-500 to-rose-600 text-white hover:from-red-600 hover:to-rose-700 focus:ring-red-500 shadow-lg shadow-red-500/30",info:"bg-gradient-to-r from-indigo-500 to-cyan-600 text-white hover:from-indigo-600 hover:to-cyan-700 focus:ring-indigo-500 shadow-lg shadow-indigo-500/30",warning:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white hover:from-yellow-600 hover:to-orange-600 focus:ring-yellow-500 shadow-lg shadow-yellow-500/30"};return`${v} ${b[o.type]||b.info}`}else return m==="secondary"?`${v} text-gray-700 bg-white border-2 border-gray-200 hover:border-gray-300 hover:bg-gray-50 focus:ring-gray-400 shadow-sm`:m==="danger"?`${v} bg-gradient-to-r from-red-500 to-rose-600 text-white hover:from-red-600 hover:to-rose-700 focus:ring-red-500 shadow-lg shadow-red-500/30`:`${v} text-gray-700 bg-white border-2 border-gray-200 hover:border-gray-300 hover:bg-gray-50 focus:ring-gray-400 shadow-sm`},r=()=>{o.closeOnBackdrop&&d()},d=()=>{i("close")},g=u=>{i("action",u.action,u),(u.action==="confirm"||u.close!==!1)&&d()};return(u,m)=>(l(),G(Ie,{to:"body"},[k(ve,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:W(()=>[e.visible?(l(),c("div",{key:0,class:"no-print fixed inset-0 z-[60] flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm",onClick:r,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},[t("div",{class:$(["w-full max-w-md transform overflow-hidden rounded-3xl shadow-2xl duration-300 animate-in zoom-in-95",n.value]),onClick:m[0]||(m[0]=F(()=>{},["stop"]))},[t("div",wt,[m[2]||(m[2]=t("div",{class:"absolute inset-0 opacity-10"},[t("div",{class:"absolute inset-0 bg-[radial-gradient(circle_at_1px_1px,_rgba(255,255,255,0.15)_1px,_transparent_0)] [background-size:20px_20px]"})],-1)),t("div",kt,[t("div",$t,[t("p",Ct,p(e.title),1)]),e.closable?(l(),c("button",{key:0,onClick:d,onKeydown:Q(d,["esc"]),class:"rounded-lg border border-white/20 bg-white/10 p-1 backdrop-blur-sm transition-all hover:border-black/10 hover:bg-black/20 focus:outline-none active:scale-90","aria-label":"ëª¨ë‹¬ ë‹«ê¸°"},[...m[1]||(m[1]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M18 6 6 18"}),t("path",{d:"m6 6 12 12"})],-1)])],32)):M("",!0)])]),e.message?(l(),c("div",At,[t("p",St,p(e.message),1),re(u.$slots,"content")])):e.message?M("",!0):(l(),c("div",Mt,[re(u.$slots,"content")])),e.buttons&&e.buttons.length>0?(l(),c("div",{key:2,class:$(["flex gap-3 px-8 py-6",e.buttons.length===1?"justify-center":"justify-end"])},[(l(!0),c(j,null,R(e.buttons,(v,b)=>(l(),c("button",{key:b,onClick:C=>g(v),class:$(["transform rounded-xl border px-5 py-2.5 text-sm font-semibold transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 active:scale-95",s(v)])},p(v.label),11,_t))),128))],2)):M("",!0)],2)])):M("",!0)]),_:3})]))}};function qe(){const{login:e,fetchFingerprint:a}=X(),o=async()=>{const n=await a(),s=new URL(be.AUTH.GOOGLE);return n&&s.searchParams.set("fingerprint",n),s.toString()};return{openGoogleLoginPopup:async()=>{const r=window.screenX+(window.outerWidth-500),d=50,g=await o(),u=window.open(g,"google-oauth",`width=500,height=600,left=${r},top=${d},scrollbars=yes,resizable=yes`),m=b=>{var C,E;b.origin===window.location.origin&&((C=b.data)==null?void 0:C.type)==="oauth-success"&&((E=b.data)!=null&&E.user)&&(e(b.data.user),window.removeEventListener("message",m))};window.addEventListener("message",m);const v=setInterval(()=>{u!=null&&u.closed&&(clearInterval(v),window.removeEventListener("message",m))},500)}}}const ie=y(0),we=y(0),ke=y(3),$e=y(3),fe=y(!1),Tt=()=>{ie.value=0,we.value=0,ke.value=3,$e.value=3},Pt=async()=>{var n;const{fingerprint:e,fetchFingerprint:a,user:o}=X(),i=e.value||await a();if(!i)return Tt(),0;fe.value=!0;try{const s={"X-Fingerprint":i};(n=o.value)!=null&&n.email&&(s["X-User-Email"]=o.value.email);const r=await fetch(be.GEMINI.USAGE,{headers:s});if(!r.ok)return 0;const d=await r.json();return ie.value=d.totalTokenCount??0,we.value=d.callCount??0,ke.value=d.limit??3,$e.value=d.remaining??Math.max(0,(d.limit??3)-(d.callCount??0)),ie.value}catch(s){return console.warn("Token usage fetch failed:",s),0}finally{fe.value=!1}},Ce=()=>({totalTokenCount:ie,callCount:we,callLimit:ke,callRemaining:$e,tokenUsageLoading:fe,fetchTokenUsage:Pt}),Se=["2nd Grade","3rd Grade","4th Grade","5th Grade","6th Grade","7th Grade","8th Grade","9th Grade","10th Grade","11th Grade","12th Grade","Adult"],Me=[{code:"English",name:"English"},{code:"Korean",name:"í•œêµ­ì–´(Korean)"},{code:"Spanish",name:"EspaÃ±ol(Spanish)"},{code:"French",name:"FranÃ§ais(French)"},{code:"Japanese",name:"æ—¥æœ¬èªž(Japanese)"}],_e=[{id:"short",label:"Short(300)",prompt:"Make it a short and concise passage around 300 characters."},{id:"medium",label:"Medium(600)",prompt:"Make it a medium-length passage around 600 characters."},{id:"long",label:"Long(1000+)",prompt:"Make it a detailed and long passage over 1000 characters."}],Le=[{id:"simple",label:"Simple(4 nodes)",prompt:"Create a simple keyword graph with exactly 4 major nodes and key relationships."},{id:"standard",label:"Standard(6 nodes)",prompt:"Create a balanced keyword graph with 6 nodes showing clear relationships."},{id:"detailed",label:"Detailed(8 nodes)",prompt:"Create a detailed keyword graph with 8 nodes, including secondary concepts and intricate relationships."}],Et={key:0,class:"mb-2 block text-sm font-bold text-gray-800"},ee={__name:"FormField",props:{label:{type:String,default:""},colSpan:{type:[String,Number],default:12,validator:e=>{const a=Number(e);return a>=1&&a<=12}}},setup(e){const a=e,o=w(()=>{const i=Number(a.colSpan);return{1:"md:col-span-1",2:"md:col-span-2",3:"md:col-span-3",4:"md:col-span-4",5:"md:col-span-5",6:"md:col-span-6",7:"md:col-span-7",8:"md:col-span-8",9:"md:col-span-9",10:"md:col-span-10",11:"md:col-span-11",12:"md:col-span-12"}[i]||"md:col-span-12"});return(i,n)=>(l(),c("div",{class:$(o.value)},[e.label?(l(),c("label",Et,p(e.label),1)):M("",!0),re(i.$slots,"default")],2))}},It={class:"relative"},jt=["value","disabled"],qt=["value"],se={__name:"SelectField",props:{modelValue:{type:[String,Number],required:!0},options:{type:Array,required:!0},optionValue:{type:String,default:"value"},optionLabel:{type:String,default:"label"},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e){const a=e,o=n=>typeof n=="string"||typeof n=="number"?n:n[a.optionValue]??n,i=n=>typeof n=="string"||typeof n=="number"?String(n):n[a.optionLabel]??String(n);return(n,s)=>(l(),c("div",It,[t("select",{value:e.modelValue,onChange:s[0]||(s[0]=r=>n.$emit("update:modelValue",r.target.value)),disabled:e.disabled,class:$(["w-full appearance-none rounded-lg border border-gray-300 bg-white px-3 py-3 text-gray-900 outline-none focus:border-color-main focus:ring-2 focus:ring-color-main/70",e.disabled?"cursor-not-allowed opacity-50":"cursor-pointer"])},[(l(!0),c(j,null,R(e.options,r=>(l(),c("option",{key:o(r),value:o(r)},p(i(r)),9,qt))),128))],42,jt),s[1]||(s[1]=t("div",{class:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"m6 9 6 6 6-6"})])],-1))]))}},Bt={class:"grid grid-cols-1 gap-6 md:grid-cols-12"},Rt={class:"relative"},Gt=["disabled"],Ot={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2"},Dt={class:"mt-2 flex justify-center md:col-span-12"},Nt=["disabled"],Ht={__name:"index",props:{isLoading:{type:Boolean,required:!0}},emits:["generate"],setup(e,{emit:a}){const o=a,{isAuthenticated:i}=X(),{callRemaining:n}=Ce(),{openGoogleLoginPopup:s}=qe(),r=()=>n.value<=0,d=y(!1),g=y("guest"),u=w(()=>g.value==="guest"?"Daily limit reached":"Credits used"),m=w(()=>g.value==="guest"?"If you log in now, you can use it 2 more times today.":"You have used all available credits."),v=q=>{q==="confirm"&&g.value==="guest"&&s()},b=y(""),C=y(Se[4]),E=y(Me[0].code),N=y(_e[1].id),H=y(Le[1].id),K=()=>{const q=b.value.trim();if(q&&!(q.length>200)){if(r()){g.value=i.value?"loggedIn":"guest",d.value=!0;return}o("generate",{topic:q,gradeLevel:C.value,language:E.value,passageLength:N.value,mapComplexity:H.value})}};return(q,L)=>(l(),c("form",{onSubmit:F(K,["prevent"]),class:"mb-8 rounded-xl border border-gray-100 bg-white p-6 shadow-md transition-all"},[t("div",Bt,[k(ee,{label:"Learning Topic","col-span":12},{default:W(()=>[t("div",Rt,[xe(t("input",{type:"text","onUpdate:modelValue":L[0]||(L[0]=A=>b.value=A),onKeydown:L[1]||(L[1]=Q(F(()=>{},["prevent"]),["enter"])),placeholder:"e.g., Photosynthesis, Industrial Revolution, Principles of AI...",disabled:e.isLoading,maxlength:200,class:$(["w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-base text-gray-900 placeholder-gray-400 outline-none transition-all focus:border-blue-500 focus:ring-2 focus:ring-blue-500/70",e.isLoading?"cursor-not-allowed opacity-50":""]),"aria-label":"Learning topic input"},null,42,Gt),[[Ge,b.value]]),e.isLoading?(l(),c("div",Ot,[...L[7]||(L[7]=[t("div",{class:"h-5 w-5 animate-spin rounded-full border-2 border-blue-200 border-t-blue-600"},null,-1)])])):M("",!0)])]),_:1}),k(ee,{label:"Target Grade","col-span":3},{default:W(()=>[k(se,{modelValue:C.value,"onUpdate:modelValue":L[2]||(L[2]=A=>C.value=A),options:f(Se),disabled:e.isLoading},null,8,["modelValue","options","disabled"])]),_:1}),k(ee,{label:"Passage Length","col-span":3},{default:W(()=>[k(se,{modelValue:N.value,"onUpdate:modelValue":L[3]||(L[3]=A=>N.value=A),options:f(_e),"option-value":"id","option-label":"label",disabled:e.isLoading},null,8,["modelValue","options","disabled"])]),_:1}),k(ee,{label:"Map Complexity","col-span":3},{default:W(()=>[k(se,{modelValue:H.value,"onUpdate:modelValue":L[4]||(L[4]=A=>H.value=A),options:f(Le),"option-value":"id","option-label":"label",disabled:e.isLoading},null,8,["modelValue","options","disabled"])]),_:1}),k(ee,{label:"Output Language","col-span":3},{default:W(()=>[k(se,{modelValue:E.value,"onUpdate:modelValue":L[5]||(L[5]=A=>E.value=A),options:f(Me),"option-value":"code","option-label":"name",disabled:e.isLoading},null,8,["modelValue","options","disabled"])]),_:1}),t("div",Dt,[t("button",{type:"submit",disabled:e.isLoading||!b.value.trim(),class:$(["w-full max-w-xs transform rounded-xl px-6 py-4 text-lg font-bold text-white shadow-lg transition-all active:scale-95",e.isLoading||!b.value.trim()?"cursor-not-allowed bg-gray-300 shadow-none":"bg-gradient-to-r from-color-main to-color-sub shadow-lg shadow-color-main/30 hover:from-blue-700 hover:to-violet-700"])},p(e.isLoading?"Generating...":"Generate Custom Materials"),11,Nt)])]),k(Lt,{visible:d.value,title:u.value,message:m.value,type:"info",buttons:[{label:"OK",action:"confirm",variant:"primary"}],closable:!0,onClose:L[6]||(L[6]=A=>d.value=!1),onAction:v},null,8,["visible","title","message"])],32))}},pe={Korean:{language:"ì–¸ì–´",readingPassage:"í•™ìŠµ ì§€ë¬¸",copyText:"ì§€ë¬¸ í…ìŠ¤íŠ¸ ë³µì‚¬",summary:"ë‚´ìš© ìš”ì•½",wikipediaReferences:"ìœ„í‚¤í”¼ë””ì•„ ì°¸ê³  ë¬¸í—Œ",keyVocabulary:"í•µì‹¬ ì–´íœ˜ ì‚¬ì „",knowledgeMap:"ì§€ì‹ êµ¬ì¡° ë§µ",mapHoverHint:"ë…¸ë“œì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ ì—°ê²°ëœ ê´€ê³„ê°€ ì„ ëª…í•˜ê²Œ í‘œì‹œë©ë‹ˆë‹¤",comprehensionAssessment:"ì§€ë¬¸ ì´í•´ë„ í‰ê°€",mapAnalysis:"ì§€ì‹ êµ¬ì¡° ë¶„ì„",multipleChoice:"ê°ê´€ì‹ í€´ì¦ˆ",shortAnswer:"ì„œìˆ í˜• í‰ê°€",creativeThinking:"ì°½ì˜ ì‚¬ê³ ë ¥ ë¬¸ì œ",answer:"ì •ë‹µ",sampleAnswer:"ì •ë‹µ ì˜ˆì‹œ",showAnswer:"ì •ë‹µ í•´ì„¤ ë³´ê¸°",explanation:"í•´ì„¤",relationshipDetail:"ê´€ê³„ ìƒì„¸ ì •ë³´",contextSnippet:"ì§€ë¬¸ ë‚´ ê·¼ê±° ë¬¸ìž¥",deepExplanation:"ì‹¬ì¸µ ê´€ê³„ í•´ì„¤",confirmClose:"í™•ì¸ ì™„ë£Œ",closeModal:"ëª¨ë‹¬ ë‹«ê¸°"},English:{language:"Language",readingPassage:"Reading Passage",copyText:"Copy Text",summary:"Summary",wikipediaReferences:"Wikipedia References",keyVocabulary:"Key Vocabulary",knowledgeMap:"Knowledge Map",mapHoverHint:"Hover over a node to highlight its connections",comprehensionAssessment:"Comprehension Assessment",mapAnalysis:"Map Analysis",multipleChoice:"Multiple Choice Quiz",shortAnswer:"Short Answer",creativeThinking:"Creative Thinking",answer:"Answer",sampleAnswer:"Sample Answer",showAnswer:"Show Answer",explanation:"Explanation",relationshipDetail:"Relationship Details",contextSnippet:"Context from Passage",deepExplanation:"Detailed Explanation",confirmClose:"Close",closeModal:"Close modal"},Spanish:{language:"Idioma",readingPassage:"Texto de Lectura",copyText:"Copiar Texto",summary:"Resumen",wikipediaReferences:"Referencias de Wikipedia",keyVocabulary:"Vocabulario Clave",knowledgeMap:"Mapa de Conocimiento",mapHoverHint:"Pasa el cursor sobre un nodo para ver sus conexiones",comprehensionAssessment:"EvaluaciÃ³n de ComprensiÃ³n",mapAnalysis:"AnÃ¡lisis del Mapa",multipleChoice:"OpciÃ³n MÃºltiple",shortAnswer:"Respuesta Corta",creativeThinking:"Pensamiento Creativo",answer:"Respuesta",sampleAnswer:"Ejemplo de Respuesta",showAnswer:"Ver Respuesta",explanation:"ExplicaciÃ³n",relationshipDetail:"Detalles de la RelaciÃ³n",contextSnippet:"Contexto del Texto",deepExplanation:"ExplicaciÃ³n Detallada",confirmClose:"Cerrar",closeModal:"Cerrar modal"},French:{language:"Langue",readingPassage:"Texte de Lecture",copyText:"Copier le Texte",summary:"RÃ©sumÃ©",wikipediaReferences:"RÃ©fÃ©rences WikipÃ©dia",keyVocabulary:"Vocabulaire ClÃ©",knowledgeMap:"Carte des Connaissances",mapHoverHint:"Survolez un nÅ“ud pour voir ses connexions",comprehensionAssessment:"Ã‰valuation de ComprÃ©hension",mapAnalysis:"Analyse de la Carte",multipleChoice:"Choix Multiple",shortAnswer:"RÃ©ponse Courte",creativeThinking:"PensÃ©e CrÃ©ative",answer:"RÃ©ponse",sampleAnswer:"Exemple de RÃ©ponse",showAnswer:"Voir la RÃ©ponse",explanation:"Explication",relationshipDetail:"DÃ©tails de la Relation",contextSnippet:"Contexte du Texte",deepExplanation:"Explication DÃ©taillÃ©e",confirmClose:"Fermer",closeModal:"Fermer le modal"},Japanese:{language:"è¨€èªž",readingPassage:"å­¦ç¿’ãƒ†ã‚­ã‚¹ãƒˆ",copyText:"ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚³ãƒ”ãƒ¼",summary:"è¦ç´„",wikipediaReferences:"Wikipediaå‚è€ƒæ–‡çŒ®",keyVocabulary:"é‡è¦èªžå½™",knowledgeMap:"çŸ¥è­˜æ§‹é€ ãƒžãƒƒãƒ—",mapHoverHint:"ãƒŽãƒ¼ãƒ‰ã«ã‚«ãƒ¼ã‚½ãƒ«ã‚’åˆã‚ã›ã‚‹ã¨é–¢é€£ã™ã‚‹æŽ¥ç¶šãŒè¡¨ç¤ºã•ã‚Œã¾ã™",comprehensionAssessment:"èª­è§£åŠ›è©•ä¾¡",mapAnalysis:"ãƒžãƒƒãƒ—åˆ†æž",multipleChoice:"é¸æŠžå•é¡Œ",shortAnswer:"è¨˜è¿°å¼å•é¡Œ",creativeThinking:"å‰µé€ çš„æ€è€ƒå•é¡Œ",answer:"æ­£è§£",sampleAnswer:"è§£ç­”ä¾‹",showAnswer:"è§£ç­”ã‚’è¦‹ã‚‹",explanation:"è§£èª¬",relationshipDetail:"é–¢ä¿‚ã®è©³ç´°",contextSnippet:"æœ¬æ–‡ã‹ã‚‰ã®å¼•ç”¨",deepExplanation:"è©³ç´°ãªè§£èª¬",confirmClose:"é–‰ã˜ã‚‹",closeModal:"ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹"}};function _(e,a){return(pe[e]||pe.Korean)[a]||pe.Korean[a]||a}const Vt={class:"flex items-start justify-between bg-gradient-to-r from-indigo-600 to-cyan-600 p-5 text-white"},zt={class:"flex flex-col items-start justify-center gap-2 pl-3 pt-3"},Ut={class:"text-sm font-black font-semibold uppercase tracking-[0.2em] opacity-80"},Ft={id:"modal-title",class:"flex items-center gap-3 text-2xl font-black"},Kt=["aria-label"],Wt={class:"max-h-[70vh] space-y-10 overflow-y-auto p-10"},Qt={class:"space-y-4"},Yt={class:"flex items-center gap-2 text-sm font-black font-semibold uppercase tracking-widest text-indigo-500"},Xt={class:"rounded-[2rem] border-2 border-indigo-100 bg-indigo-50/50 p-7 italic shadow-inner"},Zt={class:"relative text-xl font-bold leading-relaxed text-slate-800"},Jt={class:"space-y-4"},en={class:"flex items-center gap-2 text-sm font-black font-semibold uppercase tracking-widest text-cyan-500"},tn={class:"prose prose-indigo max-w-none"},nn={class:"text-lg font-semibold leading-relaxed text-slate-600"},on={class:"flex select-none justify-center p-4"},sn={__name:"EdgeDetailModal",props:{edge:{type:Object,default:null},nodes:{type:Array,required:!0},language:{type:String,default:"Korean"}},emits:["close"],setup(e){const a=e,o=i=>{var n;return((n=a.nodes.find(s=>s.id===i))==null?void 0:n.label)||i};return ce(()=>a.edge,async i=>{if(i){await le();const n=document.querySelector('[role="dialog"]');if(n){const s=n.querySelector("button");s&&s.focus()}}}),(i,n)=>(l(),G(Ie,{to:"body"},[k(ve,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:W(()=>[e.edge?(l(),c("div",{key:0,class:"no-print fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/70 p-4 backdrop-blur-md",onClick:n[5]||(n[5]=s=>i.$emit("close")),role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},[t("div",{class:"w-full max-w-2xl overflow-hidden rounded-[2.5rem] border-4 border-indigo-50 bg-white shadow-2xl duration-300 animate-in zoom-in-95",onClick:n[4]||(n[4]=F(()=>{},["stop"]))},[t("div",Vt,[t("div",zt,[t("span",Ut,p(f(_)(e.language,"relationshipDetail")),1),t("h3",Ft,[B(p(o(e.edge.source))+" ",1),n[6]||(n[6]=t("span",{class:"rounded-lg bg-white/20 p-1","aria-hidden":"true"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M5 12h14"}),t("path",{d:"m12 5 7 7-7 7"})])],-1)),B(" "+p(o(e.edge.target)),1)])]),t("button",{onClick:n[0]||(n[0]=s=>i.$emit("close")),onKeydown:n[1]||(n[1]=Q(s=>i.$emit("close"),["esc"])),class:"rounded-xl bg-white/10 p-2 transition-all hover:bg-white/20 focus:outline-none active:scale-90","aria-label":f(_)(e.language,"closeModal")},[...n[7]||(n[7]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M18 6 6 18"}),t("path",{d:"m6 6 12 12"})],-1)])],40,Kt)]),t("div",Wt,[t("div",Qt,[t("h4",Yt,[n[8]||(n[8]=t("span",{class:"h-2 w-2 rounded-full bg-indigo-500"},null,-1)),B(" "+p(f(_)(e.language,"contextSnippet")),1)]),t("div",Xt,[t("p",Zt,[n[9]||(n[9]=t("span",{class:"absolute -left-2 -top-4 text-4xl text-indigo-200 opacity-50"},'"',-1)),B(" "+p(e.edge.contextSnippet)+" ",1),n[10]||(n[10]=t("span",{class:"absolute -bottom-8 -right-2 text-4xl text-indigo-200 opacity-50"},' " ',-1))])])]),t("div",Jt,[t("h4",en,[n[11]||(n[11]=t("span",{class:"h-2 w-2 rounded-full bg-cyan-500"},null,-1)),B(" "+p(f(_)(e.language,"deepExplanation")),1)]),t("div",tn,[t("p",nn,p(e.edge.explanation),1)])])]),t("div",on,[t("button",{onClick:n[2]||(n[2]=s=>i.$emit("close")),onKeydown:n[3]||(n[3]=Q(F(s=>i.$emit("close"),["prevent"]),["enter"])),class:"rounded-2xl bg-indigo-600 px-6 py-3 font-black text-white shadow-xl shadow-indigo-100 transition-all hover:bg-indigo-700 focus:outline-none active:scale-95"},p(f(_)(e.language,"confirmClose")),33)])])])):M("",!0)]),_:1})]))}},an={class:"mb-12 print:mb-4"},rn={class:"mb-3 flex items-center gap-3 print:mb-2"},ln={class:"text-4xl font-black tracking-tight text-gray-900 print:text-2xl"},dn={class:"flex items-center space-x-6 text-sm font-medium text-gray-500"},cn={class:"flex items-center gap-1.5 rounded-full bg-gray-100 px-3 py-1 text-gray-700"},un={class:"flex items-center gap-1.5"},gn={__name:"ResultHeader",props:{content:{type:Object,required:!0}},setup(e){return(a,o)=>(l(),c("div",an,[t("div",rn,[t("h1",ln,p(e.content.topic),1),o[0]||(o[0]=t("span",{class:"rounded-lg bg-indigo-50 px-2.5 py-1 text-[11px] font-black uppercase tracking-wider text-indigo-700"}," WIKIPEDIA BASED ",-1))]),t("div",dn,[t("span",cn,[o[1]||(o[1]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),t("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})],-1)),B(" "+p(e.content.gradeLevel),1)]),t("span",un,[o[2]||(o[2]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("path",{d:"m5 12 5 5L20 7"})],-1)),B(" "+p(f(_)(e.content.language,"language"))+": "+p(e.content.language),1)])])]))}},pn={class:"no-print flex flex-wrap items-center justify-between gap-4 border-b border-gray-100 bg-gray-50/50 p-4",role:"tablist","aria-label":"Result section tabs"},fn={class:"flex space-x-1"},mn=["onClick","onKeydown","aria-selected","aria-controls","id","tabindex"],hn={class:"flex flex-wrap items-center gap-4"},vn={class:"flex min-w-[150px] items-center justify-between font-semibold"},bn={class:"flex cursor-pointer items-center gap-2 text-sm font-medium text-[#333]"},xn=["checked"],yn={class:"w-[105px] text-right font-medium"},wn=["onKeydown"],kn={__name:"ResultTabs",props:{activeTab:{type:String,required:!0},showAnswersInPrint:{type:Boolean,default:!1}},emits:["tab-change","update:showAnswersInPrint"],setup(e){const a=[{id:"passage",label:"Passage & Summary"},{id:"map",label:"Knowledge Map"},{id:"vocab",label:"Vocabulary"},{id:"assessment",label:"Assessment"}],o=()=>{window.print()},i=y(!1);return(n,s)=>(l(),c("div",pn,[t("div",fn,[(l(),c(j,null,R(a,r=>t("button",{key:r.id,onClick:d=>n.$emit("tab-change",r.id),onKeydown:[Q(F(d=>n.$emit("tab-change",r.id),["prevent"]),["enter"]),Q(F(d=>n.$emit("tab-change",r.id),["prevent"]),["space"])],class:$(["rounded-xl px-3 py-2.5 text-xs font-bold tracking-tighter transition-all focus:outline-none lg:px-5 lg:text-sm lg:tracking-tight",e.activeTab===r.id?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"text-gray-500 hover:bg-gray-200"]),role:"tab","aria-selected":e.activeTab===r.id,"aria-controls":`tabpanel-${r.id}`,id:`tab-${r.id}`,tabindex:e.activeTab===r.id?0:-1},p(r.label),43,mn)),64))]),t("div",hn,[t("div",vn,[t("label",bn,[t("div",{class:$(["flex h-5 w-9 items-center rounded-full border",[i.value?"border-color-main bg-color-main/20":"border-[#999] bg-white"]])},[xe(t("input",{class:"peer hidden",type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=r=>i.value=r),checked:e.showAnswersInPrint,onChange:s[1]||(s[1]=r=>n.$emit("update:showAnswersInPrint",r.target.checked))},null,40,xn),[[Oe,i.value]]),s[2]||(s[2]=t("div",{class:"h-4 w-4 translate-x-0.5 rounded-full bg-[#c9c9c9] transition-transform peer-checked:translate-x-4 peer-checked:bg-color-main peer-disabled:cursor-not-allowed peer-disabled:bg-[#f2f2f2]"},null,-1))],2),t("span",yn,p(i.value?"Include":"Exclude")+" answers ",1)])]),t("button",{onClick:o,onKeydown:Q(F(o,["prevent"]),["enter"]),class:"flex items-center gap-2 rounded-xl border-2 border-gray-200 px-4 py-2 text-sm font-bold transition-all hover:bg-gray-100 focus:outline-none","aria-label":"Print or save as PDF"},[...s[3]||(s[3]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round","aria-hidden":"true"},[t("path",{d:"M6 9V2h12v7"}),t("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),t("rect",{width:"12",height:"8",x:"6",y:"14"})],-1),B(" Print / Save PDF ",-1)])],40,wn)])]))}},$n=["open"],Cn={class:"flex cursor-pointer select-none items-center gap-2 text-xs font-black uppercase tracking-widest text-indigo-600 hover:underline"},An={class:"mt-4 origin-top space-y-2 rounded-2xl bg-emerald-50/50 p-4 duration-300 animate-in fade-in slide-in-from-top-2"},Sn={class:"font-bold text-emerald-700"},Mn={class:"mr-2"},_n={key:0,class:"mr-1 inline-flex h-6 w-6 items-center justify-center rounded-full bg-emerald-600 text-xs font-black text-white"},Ln={class:"text-sm text-emerald-600"},Tn={class:"mr-2 font-semibold"},Ae={__name:"AnswerExplanation",props:{answer:{type:String,required:!0},explanation:{type:String,required:!0},answerLabel:{type:String,default:"ì •ë‹µ"},summaryText:{type:String,default:"ì •ë‹µ í•´ì„¤ ë³´ê¸°"},explanationLabel:{type:String,default:"í•´ì„¤"},optionLabel:{type:String,default:null},showInPrint:{type:Boolean,default:!1}},setup(e){return(a,o)=>(l(),c("details",{class:$(["group mt-2",e.showInPrint?"print:block":"no-print"]),open:e.showInPrint},[xe(t("summary",Cn,[o[0]||(o[0]=t("svg",{class:"h-3 w-3 transition-transform duration-300 ease-out group-open:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5l7 7-7 7"})],-1)),B(" "+p(e.summaryText),1)],512),[[De,!e.showInPrint]]),t("div",An,[t("p",Sn,[t("span",Mn,"âœ“ "+p(e.answerLabel)+":",1),e.optionLabel?(l(),c("span",_n,p(e.optionLabel),1)):M("",!0),B(" "+p(e.answer),1)]),t("p",Ln,[t("span",Tn,"ðŸ’¡ "+p(e.explanationLabel)+":",1),B(" "+p(e.explanation),1)])])],10,$n))}},ue={__name:"SectionHeader",props:{badge:{type:String,required:!0},title:{type:String,required:!0},variant:{type:String,default:"gray",validator:e=>["indigo","gray"].includes(e)}},setup(e){const a=e,o=w(()=>a.variant==="indigo"?"text-indigo-600":"text-gray-500"),i=w(()=>a.variant==="indigo"?"bg-indigo-100 text-indigo-700":"bg-gray-100 text-gray-600");return(n,s)=>(l(),c("h3",{class:$(["flex items-center gap-2 text-lg font-black uppercase tracking-widest print:break-after-avoid",o.value])},[t("span",{class:$(["flex h-8 w-8 items-center justify-center rounded-full text-xs",i.value])},p(e.badge),3),B(" "+p(e.title),1)],2))}},Pn={key:0,class:"space-y-8 border-b border-gray-50 pb-10 print:space-y-4 print:pb-4"},En={class:"text-lg font-black text-indigo-900"},In={__name:"MapAnalysisSection",props:{questions:{type:Array,default:()=>[]},language:{type:String,default:"Korean"},showAnswersInPrint:{type:Boolean,default:!1}},setup(e){return(a,o)=>e.questions&&e.questions.length>0?(l(),c("div",Pn,[k(ue,{badge:"MAP",title:f(_)(e.language,"mapAnalysis"),variant:"indigo"},null,8,["title"]),t("div",{class:$(["space-y-6 rounded-3xl border border-indigo-100 bg-indigo-50/50 p-8",e.showAnswersInPrint?"print:space-y-4 print:pb-2":"print:space-y-12 print:pb-12"])},[(l(!0),c(j,null,R(e.questions,(i,n)=>(l(),c("div",{key:n,class:"space-y-3 print:break-inside-avoid print:space-y-2"},[t("p",En,p(n+1)+". "+p(i.question),1),k(Ae,{answer:i.answer,explanation:i.explanation,"answer-label":f(_)(e.language,"sampleAnswer"),"summary-text":f(_)(e.language,"showAnswer"),"explanation-label":f(_)(e.language,"explanation"),"show-in-print":e.showAnswersInPrint},null,8,["answer","explanation","answer-label","summary-text","explanation-label","show-in-print"])]))),128))],2)])):M("",!0)}},jn=65,D={correct:{container:"bg-green-50 border-green-300",label:"bg-green-200 text-green-700",text:"text-green-700 font-black"},incorrect:{container:"bg-red-50 border-red-300",label:"bg-red-200 text-red-700",text:"text-red-700 font-black"},selected:{container:"bg-indigo-50 border-indigo-300",label:"bg-indigo-200 text-indigo-700",text:"text-gray-700"},default:{container:"bg-gray-50 border-gray-100 hover:bg-white hover:border-indigo-300",label:"bg-white text-gray-400 group-hover:text-indigo-600",text:"text-gray-700"}},qn={key:0,class:"ml-auto font-black text-green-600"},Bn={key:1,class:"ml-auto font-black text-red-600"},Rn={__name:"QuestionOption",props:{optionLabel:{type:String,required:!0},optionText:{type:String,required:!0},answerState:{type:Object,required:!0,validator:e=>typeof e.isSelected=="boolean"&&typeof e.isCorrect=="boolean"&&typeof e.isIncorrect=="boolean"}},emits:["select"],setup(e){const a=e,o=w(()=>a.answerState.isCorrect?D.correct.container:a.answerState.isIncorrect?D.incorrect.container:a.answerState.isSelected?D.selected.container:D.default.container),i=w(()=>a.answerState.isCorrect?D.correct.label:a.answerState.isIncorrect?D.incorrect.label:a.answerState.isSelected?D.selected.label:D.default.label),n=w(()=>a.answerState.isCorrect?D.correct.text:a.answerState.isIncorrect?D.incorrect.text:a.answerState.isSelected?D.selected.text:D.default.text);return(s,r)=>(l(),c("button",{onClick:r[0]||(r[0]=d=>s.$emit("select",e.optionLabel)),class:$(["group flex cursor-pointer items-center gap-3 rounded-2xl border p-3 transition-all",o.value])},[t("span",{class:$(["flex h-6 w-6 items-center justify-center rounded-lg text-[10px] font-black transition-all",i.value])},p(e.optionLabel),3),t("span",{class:$(["text-sm font-medium transition-all",n.value])},p(e.optionText),3),e.answerState.isCorrect?(l(),c("span",qn,"âœ“")):e.answerState.isIncorrect?(l(),c("span",Bn,"âœ—")):M("",!0)],2))}},Gn={class:"border-l-2 border-gray-100 pl-4 print:break-inside-avoid"},On={class:"mb-4 text-lg font-bold text-gray-900 print:mb-2"},Dn={class:"ml-2 grid grid-cols-1 gap-3 sm:grid-cols-2"},Nn={__name:"MultipleChoiceQuestion",props:{question:{type:Object,required:!0,validator:e=>typeof e.question=="string"&&Array.isArray(e.options)&&typeof e.correctAnswer=="string"&&typeof e.explanation=="string"},questionNumber:{type:Number,required:!0},selectedAnswer:{type:String,default:null},language:{type:String,default:"Korean"},showAnswersInPrint:{type:Boolean,default:!1}},emits:["answer-selected"],setup(e,{emit:a}){const o=e,i=a,n=u=>String.fromCharCode(jn+u),s=u=>{const m=n(u);if(!(o.selectedAnswer===m))return{isSelected:!1,isCorrect:!1,isIncorrect:!1};const b=o.question.options[u],C=String(o.question.correctAnswer).toUpperCase(),E=String(b).toUpperCase();return{isSelected:!0,isCorrect:E===C,isIncorrect:E!==C}},r=u=>{i("answer-selected",u)},d=w(()=>o.selectedAnswer!==null),g=w(()=>{const u=String(o.question.correctAnswer).toUpperCase(),m=o.question.options.findIndex(v=>String(v).toUpperCase()===u);return m!==-1?n(m):null});return(u,m)=>(l(),c("div",Gn,[t("p",On,p(e.questionNumber)+". "+p(e.question.question),1),t("div",Dn,[(l(!0),c(j,null,R(e.question.options,(v,b)=>(l(),G(Rn,{key:b,"option-label":n(b),"option-text":v,"answer-state":s(b),onSelect:r},null,8,["option-label","option-text","answer-state"]))),128))]),k(Ae,{class:$(d.value||e.showAnswersInPrint?"":"pointer-events-none opacity-0"),answer:e.question.correctAnswer,explanation:e.question.explanation,"answer-label":f(_)(e.language,"answer"),"summary-text":f(_)(e.language,"showAnswer"),"explanation-label":f(_)(e.language,"explanation"),"option-label":g.value,"show-in-print":e.showAnswersInPrint},null,8,["class","answer","explanation","answer-label","summary-text","explanation-label","option-label","show-in-print"])]))}},Hn={class:"space-y-8 border-t border-gray-50 pt-10 print:space-y-4 print:pt-4"},Vn={class:"mb-6 text-lg font-black text-amber-900 print:mb-3"},zn={__name:"OpenEndedSection",props:{questions:{type:Array,required:!0,validator:e=>e.every(a=>typeof a=="string")},language:{type:String,default:"Korean"}},setup(e){return(a,o)=>(l(),c("div",Hn,[k(ue,{badge:"03",title:f(_)(e.language,"creativeThinking"),variant:"gray"},null,8,["title"]),(l(!0),c(j,null,R(e.questions,(i,n)=>(l(),c("div",{key:n,class:"rounded-3xl border border-amber-100 bg-amber-50/50 p-8 print:break-inside-avoid print:p-4"},[t("p",Vn,"ðŸ’¡ "+p(i),1),o[0]||(o[0]=t("div",{class:"hidden h-40 w-full rounded-2xl border-2 border-amber-200/50 bg-white/50 print:block print:h-24"},null,-1))]))),128))]))}},Un={class:"space-y-8 border-t border-gray-50 pt-10 print:space-y-4 print:pt-4"},Fn={class:"text-lg font-bold text-gray-900"},Kn={__name:"ShortAnswerSection",props:{questions:{type:Array,required:!0,validator:e=>e.every(a=>typeof a.question=="string"&&typeof a.answer=="string"&&typeof a.explanation=="string")},language:{type:String,default:"Korean"},showAnswersInPrint:{type:Boolean,default:!1}},setup(e){return(a,o)=>(l(),c("div",Un,[k(ue,{badge:"02",title:f(_)(e.language,"shortAnswer"),variant:"gray"},null,8,["title"]),(l(!0),c(j,null,R(e.questions,(i,n)=>(l(),c("div",{key:n,class:"space-y-4 print:break-inside-avoid print:space-y-2"},[t("p",Fn,p(n+1)+". "+p(i.question),1),o[0]||(o[0]=t("div",{class:"hidden h-24 w-full rounded-3xl border-2 border-gray-100 bg-gray-50/50 print:block print:h-16"},null,-1)),k(Ae,{answer:i.answer,explanation:i.explanation,"answer-label":f(_)(e.language,"answer"),"summary-text":f(_)(e.language,"showAnswer"),"explanation-label":f(_)(e.language,"explanation"),"show-in-print":e.showAnswersInPrint},null,8,["answer","explanation","answer-label","summary-text","explanation-label","show-in-print"])]))),128))]))}},Wn={class:"mb-10 border-l-8 border-indigo-600 pl-4 text-2xl font-black uppercase tracking-tight text-gray-800 print:mb-4"},Qn={class:"space-y-12 print:space-y-4"},Yn={class:"space-y-8 print:space-y-4"},Xn={__name:"index",props:{content:{type:Object,required:!0,validator:e=>Array.isArray(e.graphAssessmentQuestions)&&Array.isArray(e.multipleChoiceQuestions)},isActive:{type:Boolean,required:!0},showAnswersInPrint:{type:Boolean,default:!1}},setup(e){const a=y({}),o=(i,n)=>{a.value={...a.value,[i]:n}};return(i,n)=>{var s,r;return l(),c("section",{class:$([e.isActive?"block":"hidden print:!block","print-keep-together duration-500 animate-in fade-in slide-in-from-bottom-4"])},[t("h2",Wn,p(f(_)(e.content.language,"comprehensionAssessment")),1),t("div",Qn,[k(In,{questions:e.content.graphAssessmentQuestions,language:e.content.language,"show-answers-in-print":e.showAnswersInPrint},null,8,["questions","language","show-answers-in-print"]),t("div",Yn,[k(ue,{badge:"01",title:f(_)(e.content.language,"multipleChoice"),variant:"gray"},null,8,["title"]),(l(!0),c(j,null,R(e.content.multipleChoiceQuestions,(d,g)=>(l(),G(Nn,{key:g,question:d,"question-number":g+1,"selected-answer":a.value[g],language:e.content.language,"show-answers-in-print":e.showAnswersInPrint,onAnswerSelected:u=>o(g,u)},null,8,["question","question-number","selected-answer","language","show-answers-in-print","onAnswerSelected"]))),128))]),(s=e.content.shortAnswerQuestions)!=null&&s.length?(l(),G(Kn,{key:0,questions:e.content.shortAnswerQuestions,language:e.content.language,"show-answers-in-print":e.showAnswersInPrint},null,8,["questions","language","show-answers-in-print"])):M("",!0),(r=e.content.openEndedQuestions)!=null&&r.length?(l(),G(zn,{key:1,questions:e.content.openEndedQuestions,language:e.content.language},null,8,["questions","language"])):M("",!0)])],2)}}},me=800,Zn=550,Jn=25,eo=2.5,to=e=>Zn+(e-5)*10,de={edge:{default:"#cbd5e1",active:"#4f46e5"},node:{stroke:{default:"#94a3b8",active:"#4f46e5"},fill:{default:"#f8fafc",active:"#eef2ff"},label:{default:"#334155",active:"#312e81"}},edgeLabel:{stroke:{default:"#94a3b8",active:"#4f46e5"},text:{default:"#64748b",active:"#4f46e5"}}},no=["transform"],oo=["x","y","width","height","rx","stroke","stroke-width"],so=["dy"],ao={x:"0",dy:"0"},ro={x:"0",dy:"12"},lo=6,io=24,Te=28,Pe={__name:"EdgeLabel",props:{position:{type:Object,required:!0,validator:e=>typeof e.x=="number"&&typeof e.y=="number"},relationship:{type:String,required:!0},isActive:{type:Boolean,default:!1}},emits:["click","mouseenter","mouseleave"],setup(e){const a=e,o=w(()=>{const s=a.relationship.trim();if(s.length>10&&s.includes(" ")){const r=Math.floor(s.length/2),d=s.lastIndexOf(" ",r),g=s.indexOf(" ",r);let u=-1;if(d===-1?u=g:g===-1?u=d:u=r-d<g-r?d:g,u!==-1)return[s.slice(0,u),s.slice(u+1)]}return[s]}),i=w(()=>{const r=Math.max(...o.value.map(d=>d.length))*lo+io*2;return Math.max(96,r)}),n=w(()=>o.value.length>1?Te+14:Te);return(s,r)=>(l(),c("g",{transform:`translate(${e.position.x}, ${e.position.y})`,onMouseenter:r[0]||(r[0]=d=>s.$emit("mouseenter")),onMouseleave:r[1]||(r[1]=d=>s.$emit("mouseleave")),onClick:r[2]||(r[2]=d=>s.$emit("click")),class:$(["no-print cursor-pointer transition-all duration-500 ease-out",e.isActive?"opacity-100":"opacity-50"]),style:{"pointer-events":"auto"}},[t("rect",{x:-i.value/2,y:-n.value/2,width:i.value,height:n.value,rx:n.value/2,fill:"white",stroke:e.isActive?f(de).edgeLabel.stroke.active:f(de).edgeLabel.stroke.default,"stroke-width":e.isActive?2.5:1.5,class:"shadow-lg transition-all duration-300"},null,8,oo),t("text",{"text-anchor":"middle",dy:o.value.length>1?-2:5,class:$(["text-[10px] font-black uppercase tracking-tighter transition-all duration-300",e.isActive?"fill-indigo-700":"fill-slate-500"])},[o.value.length>1?(l(),c(j,{key:0},[t("tspan",ao,p(o.value[0]),1),t("tspan",ro,p(o.value[1]),1)],64)):(l(),c(j,{key:1},[B(p(o.value[0]),1)],64))],10,so)],42,no))}},co=["x1","y1","x2","y2","stroke","stroke-width","marker-end"],uo={__name:"GraphEdge",props:{startPos:{type:Object,required:!0,validator:e=>typeof e.x=="number"&&typeof e.y=="number"},endPos:{type:Object,required:!0,validator:e=>typeof e.x=="number"&&typeof e.y=="number"},isActive:{type:Boolean,default:!1},shouldDim:{type:Boolean,default:!1}},setup(e){return(a,o)=>(l(),c("line",{x1:e.startPos.x,y1:e.startPos.y,x2:e.endPos.x,y2:e.endPos.y,stroke:e.isActive?f(de).edge.active:f(de).edge.default,"stroke-width":e.isActive?4:1.5,"marker-end":e.isActive?"url(#arrowhead-active)":"url(#arrowhead)",class:"pointer-events-none transition-all duration-500 ease-out",style:O({opacity:e.shouldDim?.05:1})},null,12,co))}},go=["href","target"],po=["transform"],fo={filter:"url(#nodeShadow)"},mo=["x","y","width","height"],ho=["r","stroke","stroke-width"],vo=["r","fill"],bo=["transform"],xo={__name:"GraphNode",props:{node:{type:Object,required:!0,validator:e=>typeof e.id=="string"&&typeof e.label=="string"&&typeof e.x=="number"&&typeof e.y=="number"},isActive:{type:Boolean,default:!1},isHovered:{type:Boolean,default:!1},isConnected:{type:Boolean,default:!1},hasHoveredItem:{type:Boolean,default:!1}},emits:["mouseenter","mouseleave","node-click"],setup(e){const a=e,o=w(()=>(Jn+(a.node.importance||5)*eo)*.8),i=w(()=>a.isHovered?o.value*1.2:o.value),n=w(()=>i.value+24),s=w(()=>a.isHovered?"#4f46e5":a.isConnected?"#818cf8":"#94a3b8"),r=w(()=>a.isHovered?"#eef2ff":a.isConnected?"#f5f3ff":"#f8fafc"),d=w(()=>a.isHovered?"fill-indigo-700 scale-125":a.isConnected?"fill-indigo-500":"fill-slate-900"),g=w(()=>a.node.label.length*8);return(u,m)=>(l(),c("a",{href:e.node.wikiUrl||"#",target:e.node.wikiUrl?"_blank":void 0,rel:"noopener noreferrer",class:"cursor-pointer outline-none",style:O({opacity:e.isActive?1:e.hasHoveredItem?.2:1}),onMouseenter:m[0]||(m[0]=v=>u.$emit("mouseenter",e.node.id)),onMouseleave:m[1]||(m[1]=v=>u.$emit("mouseleave")),onClick:m[2]||(m[2]=v=>u.$emit("node-click",e.node,v))},[t("g",{transform:`translate(${e.node.x}, ${e.node.y})`,class:"transition-transform duration-500 ease-out"},[t("g",fo,[t("rect",{x:-Math.max(i.value,g.value/2+4),y:-i.value,width:Math.max(i.value,g.value/2+4)*2,height:i.value+n.value,fill:"transparent",class:"pointer-events-auto"},null,8,mo),t("circle",{cx:"0",cy:"0",r:i.value,fill:"white",stroke:s.value,"stroke-width":e.isHovered?6:e.isConnected?3:2,class:"transition-all duration-300"},null,8,ho),t("circle",{cx:"0",cy:"0",r:i.value-4,fill:r.value,class:"transition-all duration-300"},null,8,vo),t("g",{transform:`translate(0, ${n.value})`},[t("text",{"text-anchor":"middle",stroke:"white","stroke-width":"6","stroke-linejoin":"round",class:$(["pointer-events-none select-none text-sm font-black transition-all duration-300",{"scale-125":e.isHovered}])},p(e.node.label),3),t("text",{"text-anchor":"middle",class:$(["pointer-events-none text-sm font-black transition-all duration-300",d.value])},p(e.node.label),3)],8,bo)])],8,po)],44,go))}},yo={__name:"SVGDefs",setup(e){return(a,o)=>(l(),c("defs",null,[...o[0]||(o[0]=[t("pattern",{id:"dotGrid",x:"0",y:"0",width:"30",height:"30",patternUnits:"userSpaceOnUse"},[t("circle",{cx:"2",cy:"2",r:"1",fill:"#e2e8f0"})],-1),t("filter",{id:"nodeShadow",x:"-20%",y:"-20%",width:"150%",height:"150%"},[t("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"3"}),t("feOffset",{dx:"0",dy:"2",result:"offsetblur"}),t("feComponentTransfer",null,[t("feFuncA",{type:"linear",slope:"0.2"})]),t("feMerge",null,[t("feMergeNode"),t("feMergeNode",{in:"SourceGraphic"})])],-1),t("marker",{id:"arrowhead",markerWidth:"8",markerHeight:"6",refX:"28",refY:"3",orient:"auto",markerUnits:"strokeWidth"},[t("polygon",{points:"0 0, 8 3, 0 6",fill:"#cbd5e1"})],-1),t("marker",{id:"arrowhead-active",markerWidth:"8",markerHeight:"6",refX:"28",refY:"3",orient:"auto",markerUnits:"strokeWidth"},[t("polygon",{points:"0 0, 8 3, 0 6",fill:"#4f46e5"})],-1)])]))}},wo=200,ko=2;function $o(e){const a=y(null),o=to(e.value.nodes.length),i=w(()=>{if(!e.value.nodes.length)return[];const s=e.value.nodes;return s.map((r,d)=>{if(d===0)return{...r,x:me/2,y:o/2};const g=(d-1)/(s.length-1)*2*Math.PI,u=wo+(r.importance||5)*ko;return{...r,x:me/2+Math.cos(g)*u,y:o/2+Math.sin(g)*u}})});return{layout:i,height:o,getNodePos:(s,r=null)=>{const d=i.value.find(u=>u.id===s);if(!d)return{x:0,y:0};if(!r||r===s)return{x:d.x,y:d.y};if(e.value.edges.some(u=>u.source===s&&u.target===r||u.target===s&&u.source===r)){const u=i.value.find(m=>m.id===r);if(u){const m=d.x-u.x,v=d.y-u.y,b=Math.sqrt(m*m+v*v)||1;return{x:d.x+m/b*45,y:d.y+v/b*45}}}return{x:d.x,y:d.y}},hoveredNode:a}}const Co={class:"relative overflow-hidden rounded-2xl border-2 border-slate-100 bg-white p-4 shadow-inner print:p-2"},Ao={class:"no-print pointer-events-none absolute left-6 top-6 z-10"},So={class:"mb-1 text-sm font-black uppercase tracking-wider text-slate-800"},Mo={class:"text-xs font-medium text-slate-500"},_o=["viewBox"],Lo={__name:"ConceptMap",props:{graph:{type:Object,required:!0,validator:e=>Array.isArray(e.nodes)&&Array.isArray(e.edges)},language:{type:String,default:"Korean"},isActive:{type:Boolean,default:!0}},emits:["edge-click"],setup(e,{emit:a}){const o=e,i=a,n=y(null),s=()=>{if(!n.value)return;const{scrollWidth:x,clientWidth:h}=n.value;x>h&&(n.value.scrollLeft=(x-h)/2)};ce(()=>o.isActive,x=>{x&&le(()=>s())}),te(()=>{o.isActive&&le(()=>s())});const r=y(null),d=y(null),g=y(null),u=Ne(o,"graph"),{layout:m,height:v,getNodePos:b}=$o(u),C=w(()=>r.value||d.value),E=x=>b(x,C.value),N=w(()=>C.value!==null||g.value!==null),H=(x,h)=>{const S=E(x.source),T=E(x.target),I=T.x-S.x,V=T.y-S.y,Z=Math.sqrt(I*I+V*V)||1,ne=-V/Z,oe=I/Z,J=(h%2===0?1:-1)*22;return{x:S.x+I*.5+ne*J,y:S.y+V*.5+oe*J}},K=x=>C.value===x,q=x=>!C.value||C.value===x?!1:o.graph.edges.some(h=>h.source===x&&h.target===C.value||h.target===x&&h.source===C.value),L=x=>{const h=C.value===x,S=q(x)||o.graph.edges.some(T=>g.value!==null&&(o.graph.edges[g.value].source===x||o.graph.edges[g.value].target===x));return h||S},A=x=>{const h=E(x.id);return{...x,x:h.x,y:h.y}},P=x=>{const h=o.graph.edges[x];return C.value===h.source||C.value===h.target||g.value===x},Y=x=>{const h=o.graph.edges[x];return g.value===x||C.value!==null&&(h.source===C.value||h.target===C.value)},U=(x,h)=>{d.value!==x.id&&(h.preventDefault(),d.value=x.id)},ge=x=>{(x.target.tagName==="svg"||x.target.tagName==="rect")&&(d.value=null)};return(x,h)=>(l(),c("div",Co,[t("div",Ao,[t("h3",So,p(f(_)(e.language,"knowledgeMap")),1),t("p",Mo,p(f(_)(e.language,"mapHoverHint")),1)]),t("div",{ref_key:"scrollContainer",ref:n,class:"w-full overflow-x-auto overflow-y-hidden"},[(l(),c("svg",{viewBox:`0 0 ${f(me)} ${f(v)}`,class:"h-auto w-full min-w-[600px] select-none drop-shadow-sm print:max-h-[400px]",onClick:ge},[k(yo),h[4]||(h[4]=t("rect",{width:"100%",height:"100%",fill:"url(#dotGrid)",class:"no-print"},null,-1)),(l(!0),c(j,null,R(e.graph.edges,(S,T)=>(l(),G(uo,{key:`edge-${T}`,"start-pos":E(S.source),"end-pos":E(S.target),"is-active":P(T),"should-dim":N.value&&!P(T)},null,8,["start-pos","end-pos","is-active","should-dim"]))),128)),(l(!0),c(j,null,R(e.graph.edges,(S,T)=>(l(),c(j,{key:`edge-label-inactive-${T}`},[Y(T)?M("",!0):(l(),G(Pe,{key:0,position:H(S,T),relationship:S.relationship,"is-active":!1,onMouseenter:I=>g.value=T,onMouseleave:h[0]||(h[0]=I=>g.value=null)},null,8,["position","relationship","onMouseenter"]))],64))),128)),(l(!0),c(j,null,R(f(m),S=>(l(),G(xo,{key:`node-${S.id}`,node:A(S),"is-active":L(S.id),"is-hovered":K(S.id),"is-connected":q(S.id),"has-hovered-item":N.value,onMouseenter:h[1]||(h[1]=T=>r.value=T),onMouseleave:h[2]||(h[2]=T=>r.value=null),onNodeClick:U},null,8,["node","is-active","is-hovered","is-connected","has-hovered-item"]))),128)),(l(!0),c(j,null,R(e.graph.edges,(S,T)=>(l(),c(j,{key:`edge-label-active-${T}`},[Y(T)?(l(),G(Pe,{key:0,position:H(S,T),relationship:S.relationship,"is-active":!0,onClick:I=>i("edge-click",S),onMouseenter:I=>g.value=T,onMouseleave:h[3]||(h[3]=I=>g.value=null)},null,8,["position","relationship","onClick","onMouseenter"])):M("",!0)],64))),128))],8,_o))],512)]))}},To={class:"mb-8 border-l-8 border-indigo-600 pl-4 text-2xl font-black uppercase tracking-tight text-gray-800 print:mb-4"},Po={__name:"index",props:{content:{type:Object,required:!0},isActive:{type:Boolean,required:!0}},emits:["edge-click"],setup(e,{emit:a}){const o=a;return(i,n)=>e.content.keywordGraph?(l(),c("section",{key:0,class:$([e.isActive?"block":"hidden print:!block","print-keep-together duration-500 animate-in fade-in slide-in-from-bottom-4"])},[t("h2",To,p(f(_)(e.content.language,"knowledgeMap")),1),k(Lo,{graph:e.content.keywordGraph,language:e.content.language,"is-active":e.isActive,onEdgeClick:n[0]||(n[0]=s=>o("edge-click",s))},null,8,["graph","language","is-active"])],2)):M("",!0)}},Eo={key:0,class:"group relative mb-10 print:mb-4"},Io={class:"overflow-hidden rounded-3xl border-4 border-white shadow-2xl transition-transform duration-500 hover:scale-[1.01]"},jo=["src","alt"],qo={class:"mb-6 flex items-end justify-between print:mb-3"},Bo={class:"border-l-8 border-indigo-600 pl-4 text-2xl font-black uppercase tracking-tight text-gray-800"},Ro=["aria-label"],Go={class:"prose prose-indigo max-w-none text-lg font-medium leading-relaxed text-gray-700"},Oo=["innerHTML"],Do={class:"mt-10 rounded-3xl border border-indigo-100 bg-indigo-50/50 p-8 print:mt-4 print:p-4"},No={class:"mb-3 flex items-center gap-2 text-lg font-black text-indigo-900 print:mb-2"},Ho={class:"font-semibold leading-relaxed text-indigo-800"},Vo={key:1,class:"no-print mt-12 border-t-2 border-gray-50 pt-8"},zo={class:"mb-6 text-xs font-black uppercase tracking-widest text-gray-400"},Uo={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Fo=["href"],Ko={class:"flex h-8 w-8 items-center justify-center rounded-xl bg-white text-xs font-black text-indigo-600 shadow-sm transition-all group-hover:bg-indigo-600 group-hover:text-white"},Wo={class:"overflow-hidden"},Qo={class:"truncate text-sm font-bold text-gray-800"},Yo={class:"truncate font-mono text-[10px] text-gray-400"},Xo={__name:"PassageSection",props:{content:{type:Object,required:!0},isActive:{type:Boolean,required:!0}},emits:["copy"],setup(e){const a=e,o=w(()=>a.content.adaptedReadingPassage.split(/\n+/).filter(n=>n.trim())),i=n=>n?n.split(/(\[\d+\])/g).map(r=>{var g;const d=r.match(/\[(\d+)\]/);if(d){const u=parseInt(d[1],10),m=u-1,v=(g=a.content.sources)==null?void 0:g[m];return v!=null&&v.uri?`<sup class="px-0.5 align-top">
            <a
              href="${v.uri}"
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center justify-center w-5 h-5 text-[10px] font-bold bg-indigo-100 text-indigo-700 rounded-full hover:bg-indigo-600 hover:text-white transition-all shadow-sm no-print"
            >
              ${u}
            </a>
          </sup>`:""}return r}).join(""):"";return(n,s)=>(l(),c("section",{class:$([e.isActive?"block":"hidden print:!block","print-keep-together duration-500 animate-in fade-in slide-in-from-bottom-4"]),id:"tabpanel-passage",role:"tabpanel","aria-labelledby":"tab-passage"},[e.content.imageUrl?(l(),c("div",Eo,[t("div",Io,[t("img",{src:e.content.imageUrl,alt:`${e.content.topic} ê´€ë ¨ ì´ë¯¸ì§€`,class:"aspect-video w-full object-cover",loading:"lazy"},null,8,jo)])])):M("",!0),t("div",qo,[t("h2",Bo,p(f(_)(e.content.language,"readingPassage")),1),t("button",{onClick:s[0]||(s[0]=r=>n.$emit("copy",e.content.adaptedReadingPassage)),onKeydown:s[1]||(s[1]=Q(F(r=>n.$emit("copy",e.content.adaptedReadingPassage),["prevent"]),["enter"])),class:"no-print rounded px-2 py-1 text-sm font-bold text-indigo-600 transition-all hover:underline focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2","aria-label":f(_)(e.content.language,"copyText")},p(f(_)(e.content.language,"copyText")),41,Ro)]),t("div",Go,[(l(!0),c(j,null,R(o.value,(r,d)=>(l(),c("p",{key:d,class:"mb-6 indent-0 print:mb-3",innerHTML:i(r)},null,8,Oo))),128))]),t("div",Do,[t("h3",No,p(f(_)(e.content.language,"summary")),1),t("p",Ho,p(e.content.summary),1)]),e.content.sources&&e.content.sources.length>0?(l(),c("div",Vo,[t("h4",zo,p(f(_)(e.content.language,"wikipediaReferences")),1),t("div",Uo,[(l(!0),c(j,null,R(e.content.sources,(r,d)=>(l(),c("a",{key:d,href:r.uri,target:"_blank",rel:"noopener noreferrer",class:"group flex items-center gap-4 rounded-2xl border border-gray-100 bg-gray-50 p-4 transition-all hover:border-indigo-300 hover:bg-white"},[t("span",Ko,p(d+1),1),t("div",Wo,[t("p",Qo,p(r.title),1),t("p",Yo,p(r.uri),1)])],8,Fo))),128))])])):M("",!0)],2))}},Zo={class:"mb-8 border-l-8 border-indigo-600 pl-4 text-2xl font-black uppercase tracking-tight text-gray-800 print:mb-4"},Jo={class:"grid grid-cols-1 gap-6 md:grid-cols-2 print:gap-3"},es={class:"mb-2 text-xl font-black text-indigo-600 print:mb-1"},ts={class:"mb-3 font-bold text-gray-700 print:mb-1"},ns={class:"rounded-xl border border-gray-100 bg-gray-50 p-3 text-sm italic text-gray-500 print:p-2"},os={__name:"VocabularySection",props:{vocabulary:{type:Array,required:!0},language:{type:String,default:"Korean"},isActive:{type:Boolean,required:!0}},setup(e){return(a,o)=>(l(),c("section",{class:$([e.isActive?"block":"hidden print:!block","print-keep-together duration-500 animate-in fade-in slide-in-from-bottom-4"]),id:"tabpanel-vocab",role:"tabpanel","aria-labelledby":"tab-vocab"},[t("h2",Zo,p(f(_)(e.language,"keyVocabulary")),1),t("div",Jo,[(l(!0),c(j,null,R(e.vocabulary,(i,n)=>(l(),c("div",{key:n,class:"rounded-3xl border-2 border-gray-100 bg-white p-6 shadow-sm transition-all hover:border-indigo-200 print:p-3"},[t("h3",es,p(i.word),1),t("p",ts,"â— "+p(i.definition),1),t("p",ns,' " '+p(i.example)+' " ',1)]))),128))])],2))}},ss={class:"result-view relative overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-xl print:overflow-visible"},as={class:"mx-auto max-w-4xl p-8 print:p-4"},rs={class:"space-y-12 print:space-y-4"},ls={__name:"index",props:{content:{type:Object,required:!0}},emits:["copy"],setup(e,{emit:a}){const o=a,i=y("passage"),n=y(null),s=y(!1),r=g=>{o("copy",g)},d=g=>{n.value=g};return(g,u)=>{var m;return l(),c("div",ss,[k(sn,{edge:n.value,nodes:((m=e.content.keywordGraph)==null?void 0:m.nodes)||[],language:e.content.language,onClose:u[0]||(u[0]=v=>n.value=null)},null,8,["edge","nodes","language"]),k(kn,{"active-tab":i.value,"show-answers-in-print":s.value,onTabChange:u[1]||(u[1]=v=>i.value=v),"onUpdate:showAnswersInPrint":u[2]||(u[2]=v=>s.value=v)},null,8,["active-tab","show-answers-in-print"]),t("div",as,[k(gn,{content:e.content},null,8,["content"]),t("div",rs,[k(Xo,{content:e.content,onCopy:r,"is-active":i.value==="passage"},null,8,["content","is-active"]),e.content.keywordGraph?(l(),G(Po,{key:0,content:e.content,"is-active":i.value==="map",onEdgeClick:d},null,8,["content","is-active"])):M("",!0),k(os,{vocabulary:e.content.vocabulary,language:e.content.language,"is-active":i.value==="vocab"},null,8,["vocabulary","language","is-active"]),k(Xn,{content:e.content,"is-active":i.value==="assessment","show-answers-in-print":s.value},null,8,["content","is-active","show-answers-in-print"])])])])}}},is={},ds={class:"no-print mt-20 bg-gray-900 py-12 text-white"};function cs(e,a){return l(),c("footer",ds,[...a[0]||(a[0]=[he('<div class="mx-auto max-w-7xl px-4 text-center"><h2 class="mb-4 text-2xl font-bold">Dramatically reduce your lesson preparation time.</h2><p class="mb-8 text-gray-400"> Thousands of teachers are already using AI to design customized lessons. </p><div class="flex justify-center space-x-6"><span class="border-r border-gray-700 pr-6 text-sm">Quick Content Generation</span><span class="border-r border-gray-700 pr-6 text-sm">Curriculum Alignment</span><span class="text-sm">Multilingual Support</span></div></div>',1)])])}const us=ye(is,[["render",cs]]),gs="/edugenie/assets/logo-BQaTpBxa.svg",ps="/edugenie/assets/edu_genie-DtW94n55.svg",fs=["disabled"],ms={class:"relative flex h-full w-full items-center justify-between"},hs={__name:"GoogleLoginButton",props:{isDarkMode:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},setup(e){const{openGoogleLoginPopup:a}=qe();return(o,i)=>(l(),c("button",{onClick:i[0]||(i[0]=(...n)=>f(a)&&f(a)(...n)),disabled:e.disabled,class:$(["disabled:cursor-defaults group relative box-content flex h-[40px] min-w-max max-w-[400px] cursor-pointer select-none items-center justify-center overflow-hidden rounded-full border px-2.5 font-['Roboto',_arial,_sans-serif] text-sm tracking-[0.25px] transition-all duration-[218ms] focus:outline-none lg:rounded-[20px] lg:px-3",[e.isDarkMode?"border-[#8e918f] bg-[#131314] text-[#e3e3e3] disabled:border-[#8e918f1f] disabled:bg-[#13131461]":"border-[#747775] bg-white text-[#1f1f1f] disabled:border-[#1f1f1f1f] disabled:bg-[#ffffff61]",e.disabled?"":"hover:shadow-[0_1px_2px_0_rgba(60,64,67,0.30),0_1px_3px_1px_rgba(60,64,67,0.15)]"]])},[t("div",{class:$(["absolute inset-0 opacity-0 transition-opacity duration-[218ms]",[e.isDarkMode?"group-hover:bg-white group-hover:opacity-[8%] group-focus:bg-white group-focus:opacity-[12%] group-active:bg-white group-active:opacity-[12%]":"group-hover:bg-[#303030] group-hover:opacity-[8%] group-focus:bg-[#303030] group-focus:opacity-[12%] group-active:bg-[#303030] group-active:opacity-[12%]"]])},null,2),t("div",ms,[t("div",{class:$(["h-5 w-5 min-w-[20px] lg:mr-[10px]",{"opacity-[38%]":e.disabled}])},[...i[1]||(i[1]=[he('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" class="block"><path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"></path><path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"></path><path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"></path><path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"></path></svg>',1)])],2),t("span",{class:$(["hidden grow overflow-hidden text-ellipsis whitespace-nowrap align-top font-medium lg:block",{"opacity-[38%]":e.disabled}])},[re(o.$slots,"default",{},()=>[i[2]||(i[2]=B("Sign in",-1))])],2)])],10,fs))}},vs={class:"relative select-none",ref:"dropdownRef"},bs=["aria-expanded"],xs={key:0,class:"h-8 w-8 overflow-hidden rounded-full border border-gray-200"},ys=["src","alt"],ws={class:"hidden font-['Roboto',_arial,_sans-serif] text-sm font-medium text-[#1f1f1f] xs-390:block"},ks={key:0,class:"absolute right-0 top-full z-50 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},$s={class:"border-b border-gray-100 px-4 py-2"},Cs={class:"truncate text-sm font-medium text-gray-900"},As={class:"truncate text-xs text-gray-500"},Ss={__name:"UserProfile",setup(e){const a=je(),{user:o,userInitial:i,logout:n}=X(),s=y(!1),r=()=>{s.value=!s.value},d=()=>{s.value=!1,n(),a.push({path:"/",query:{}})};return(g,u)=>{var m,v;return l(),c("div",vs,[t("button",{onClick:r,class:$(["box-content flex h-10 items-center gap-x-0.5 rounded-full border border-[#747775] bg-white px-1 pr-2 transition-colors hover:bg-gray-50 focus:outline-none",{"bg-gray-100":s.value}]),"aria-haspopup":"true","aria-expanded":s.value},[(m=f(o))!=null&&m.picture?(l(),c("div",xs,[t("img",{src:f(o).picture,alt:f(o).name,class:"h-full w-full object-cover"},null,8,ys)])):(l(),c("div",{key:1,class:"flex h-8 w-8 items-center justify-center rounded-full text-sm font-semibold text-white",style:O({backgroundColor:((v=f(o))==null?void 0:v.profileColor)||"#6366F1"})},p(f(i)),5)),t("span",ws,p(f(o).name),1),(l(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:$(["h-5 w-5 text-gray-500 transition-transform duration-200",{"rotate-180":s.value}])},[...u[1]||(u[1]=[t("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z","clip-rule":"evenodd"},null,-1)])],2))],10,bs),s.value?(l(),c("div",ks,[t("div",$s,[t("p",Cs,p(f(o).name),1),t("p",As,p(f(o).email),1)]),t("button",{onClick:d,class:"flex w-full items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[...u[2]||(u[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"mr-2 h-4 w-4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})],-1),B(" Sign out ",-1)])])])):M("",!0),s.value?(l(),c("div",{key:1,class:"fixed inset-0 z-40 cursor-default",onClick:u[0]||(u[0]=b=>s.value=!1)})):M("",!0)],512)}}},Ms={class:"no-print sticky top-0 z-50 border-b border-gray-200 bg-white"},_s={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},Ls={class:"flex h-16 justify-between"},Ts={class:"relative flex select-none items-center gap-x-2"},Ps=["title"],Es={class:"group flex items-baseline gap-1"},Is={key:0,class:"ml-1 animate-pulse text-[10px] font-medium text-indigo-400"},js={key:1,class:"rounded-lg bg-gray-100 px-2 py-1 text-xs text-gray-400"},qs={key:2,class:"flex items-center gap-x-2"},Bs={key:3,class:"relative overflow-hidden rounded-full p-0.5"},Rs={key:0,class:"absolute inset-[-1000%] -z-10 animate-[spin_2s_linear_infinite] bg-[conic-gradient(from_0deg,#6366f1_0%,#a855f7_25%,transparent_50%)]"},Gs={__name:"Header",setup(e){const a=je(),{isAuthenticated:o}=X(),{callCount:i,callRemaining:n,tokenUsageLoading:s,callLimit:r,fetchTokenUsage:d}=Ce();te(()=>{d()}),ce(o,()=>{d()});const g=y(!1),u=w(()=>n.value<=0?o.value?"You've used all credits for today. See you tomorrow!":"Daily limit reached. Log in now to get 2 more credits instantly!":o.value?`Remaining: ${n.value} / Total: 5 credits today`:`Guest: ${n.value} credits left. Log in to unlock 5 daily credits!`),m=()=>{a.push({path:"/",query:{}})};return(v,b)=>(l(),c("nav",Ms,[t("div",_s,[t("div",Ls,[t("div",{class:"flex cursor-pointer items-center space-x-2 py-1 transition-opacity hover:opacity-80",onClick:m},[...b[3]||(b[3]=[t("img",{src:gs,alt:"EduGenie Logo",class:"hidden h-full object-contain xs-480:block"},null,-1),t("img",{src:ps,alt:"EduGenie Logo",class:"block h-full object-contain xs-480:hidden"},null,-1)])]),t("div",Ts,[f(s)?(l(),c("span",js,"...")):(l(),c("span",{key:0,class:"flex h-10 items-center gap-1 rounded-full border bg-gray-100 px-2.5",title:u.value,onClick:b[0]||(b[0]=C=>g.value=!g.value)},[t("div",Es,[t("span",{class:$(["text-sm font-black",f(n)>0?"text-[#333]":"text-rose-500"])},p(f(i))+" / "+p(f(r)),3),b[4]||(b[4]=t("span",{class:"text-[9px] font-bold uppercase text-gray-400 transition-colors group-hover:text-indigo-500"}," Credits ",-1)),f(o)?M("",!0):(l(),c("span",Is," (+2 ðŸ”“) "))])],8,Ps)),f(o)?(l(),c("div",qs,[k(Ss)])):(l(),c("div",Bs,[k(hs,{isDarkMode:!1,disabled:f(s)},null,8,["disabled"]),f(n)<=0?(l(),c("div",Rs)):M("",!0)])),g.value?(l(),c("div",{key:4,onClick:b[1]||(b[1]=C=>g.value=!1),class:$(["absolute top-[3.5rem] z-50 mb-2 w-48 -translate-x-1/2 rounded-lg bg-gray-800 p-2 text-[11px] text-white shadow-xl",f(o)?"left-[45px]":"left-[65px]"])},[b[5]||(b[5]=t("div",{class:"absolute bottom-full left-1/2 -translate-x-1/2 border-4 border-transparent border-b-gray-800"},null,-1)),B(" "+p(u.value),1)],2)):M("",!0),g.value?(l(),c("div",{key:5,class:"fixed inset-0 z-40 cursor-default",onClick:b[2]||(b[2]=C=>g.value=!1)})):M("",!0)])])])]))}},ae=y([]);function Os(){const e=(s,r="info",d=5e3)=>{const g=Date.now().toString();ae.value.push({id:g,message:s,type:r,duration:d}),d>0&&setTimeout(()=>{a(g)},d)},a=s=>{const r=ae.value.findIndex(d=>d.id===s);r>-1&&ae.value.splice(r,1)};return{toasts:ae,showToast:e,removeToast:a,showSuccess:s=>{e(s,"success")},showError:s=>{e(s,"error",5e3)},showInfo:s=>{e(s,"info")}}}async function Ds(e){var g;e.onProgress&&e.onProgress(10);const{fetchFingerprint:a,user:o}=X(),i=await a(),n=(g=o==null?void 0:o.value)==null?void 0:g.email,s={"Content-Type":"application/json"};i&&(s["X-Fingerprint"]=i),n&&(s["X-User-Email"]=n);const r=await fetch(be.GEMINI.EDUCATIONAL_CONTENT,{method:"POST",headers:s,body:JSON.stringify({topic:e.topic,gradeLevel:e.gradeLevel,language:e.language,passageLength:e.passageLength,mapComplexity:e.mapComplexity})});if(!r.ok){let u=`Backend request failed (${r.status})`;try{const v=await r.json();v!=null&&v.message&&(u=Array.isArray(v.message)?v.message.join(", "):v.message)}catch{}const m=new Error(u);throw m.status=r.status,m}const d=await r.json();return e.onProgress&&e.onProgress(95),d!=null&&d.usageMetadata&&e.onTokenUsage&&e.onTokenUsage({promptTokenCount:d.usageMetadata.promptTokenCount||0,candidatesTokenCount:d.usageMetadata.candidatesTokenCount||0,totalTokenCount:d.usageMetadata.totalTokenCount||0}),e.onProgress&&e.onProgress(100),d.content}async function Ns(e){if(!e)return!1;try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(e),!0;const a=document.createElement("textarea");a.value=e,a.style.position="fixed",a.style.left="-999999px",a.style.top="-999999px",document.body.appendChild(a),a.focus(),a.select();try{const o=document.execCommand("copy");return document.body.removeChild(a),o}catch{return document.body.removeChild(a),!1}}catch(a){return console.error("Failed to copy text:",a),!1}}const Hs={class:"min-h-screen bg-gray-50 selection:bg-indigo-100 selection:text-indigo-900"},Vs={class:"mx-auto max-w-7xl px-4 py-10 sm:px-6 lg:px-8"},zs={class:"no-print mx-auto max-w-5xl"},Us={key:1,class:"no-print mt-12"},Fs={class:"fixed bottom-4 left-1/2 z-50 -translate-x-1/2 space-y-2",role:"region","aria-live":"polite","aria-label":"Notifications"},Ws={__name:"Home",setup(e){const{toasts:a,removeToast:o,showSuccess:i,showError:n}=Os(),{fetchTokenUsage:s}=Ce(),r=y("idle"),d=y(null),g=y(null),u=y(null),m=y(null),v=y(!1),b=y(0),C=y(null);let E=null;const N=q=>{r.value=q},H=async q=>{var L;if(v.value){n("Materials are already being generated. Please wait a moment.");return}if(!q.topic||!q.topic.trim()){n("Please enter a learning topic.");return}v.value=!0,r.value="loading",g.value=null,b.value=0,C.value=null,E=setInterval(()=>{if(b.value<95){const A=b.value<30?2:b.value<60?1.5:.5;b.value=Math.min(b.value+A,95)}},500);try{const A=await Ds({...q,onProgress:U=>{b.value=U},onTokenUsage:U=>{C.value=U}});b.value=100,E&&(clearInterval(E),E=null),await new Promise(U=>setTimeout(U,500)),d.value=A,r.value="success";const P=C.value,Y=(P==null?void 0:P.totalTokenCount)!=null?`Educational materials have been successfully generated!
(Tokens: ${P.totalTokenCount.toLocaleString()}, Input: ${(P.promptTokenCount??0).toLocaleString()}, Output: ${(P.candidatesTokenCount??0).toLocaleString()})`:"Educational materials have been successfully generated!";i(Y),s(),await le(),(L=m.value)==null||L.scrollIntoView({behavior:"smooth",block:"start"})}catch(A){console.error("Generation error:",A);let P="An unexpected error occurred while generating materials.";A.message&&(A.message.includes("API key")?P="API key is not configured. Please check your environment variables.":A.message.includes("network")||A.message.includes("fetch")?P="Please check your network connection.":A.message.includes("parse")?P="An error occurred while processing the server response. Please try again.":P=A.message),g.value=P,r.value="error",n(P)}finally{E&&(clearInterval(E),E=null),b.value=0,v.value=!1}},K=async q=>{await Ns(q)?i("Copied to clipboard!"):n("Failed to copy. Please check your browser settings.")};return(q,L)=>(l(),c("div",Hs,[k(Gs),t("main",Vs,[t("div",zs,[k(yt),k(Ht,{ref_key:"inputFormRef",ref:u,onGenerate:H,"is-loading":r.value==="loading"},null,8,["is-loading"]),r.value==="error"?(l(),G(Ue,{key:0,error:g.value||"An unknown error occurred.",onClose:L[0]||(L[0]=A=>N("idle"))},null,8,["error"])):M("",!0),r.value==="loading"?(l(),G(dt,{key:1,"progress-value":b.value},null,8,["progress-value"])):M("",!0)]),r.value==="success"&&d.value?(l(),c("div",{key:0,ref_key:"resultRef",ref:m,class:"mt-4"},[k(ls,{content:d.value,onCopy:K},null,8,["content"])],512)):M("",!0),r.value==="idle"?(l(),c("div",Us,[k(Qe)])):M("",!0)]),r.value!=="loading"&&r.value!=="success"?(l(),G(us,{key:0})):M("",!0),t("div",Fs,[(l(!0),c(j,null,R(f(a),A=>(l(),G(ht,{key:A.id,message:A.message,type:A.type,duration:A.duration,onClose:P=>f(o)(A.id)},null,8,["message","type","duration","onClose"]))),128))])]))}};export{Ws as default};
